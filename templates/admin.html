
{% extends 'base.html' %}
{% block title %}لوحة التحكم الإدارية{% endblock %}
{% block content %}
<h2>لوحة التحكم الإدارية</h2>

<h3>المستخدمون المسجلون</h3>
<table border="1">
    <tr><th>الاسم</th><th>البريد</th><th>الدور</th></tr>
    {% for user in users %}
    <tr>
        <td>{{ user[1] }}</td>
        <td>{{ user[2] }}</td>
        <td>{{ user[4] }}</td>
    </tr>
    {% endfor %}
</table>

<h3>طلبات الانضمام كمصنع</h3>
<table border="1">
    <tr><th>اسم المصنع</th><th>البريد</th><th>الموقع</th></tr>
    {% for req in requests %}
    <tr>
        <td>{{ req[1] }}</td>
        <td>{{ req[2] }}</td>
        <td>
        {% if req[3] and req[4] %}
            <div id="map{{ loop.index0 }}" style="width: 100%; height: 200px;"></div>
            <script>
                function initMap{{ loop.index0 }}() {
                    var loc = {{ lat: req[3], lng: req[4] }};
                    var map = new google.maps.Map(document.getElementById("map{{ loop.index0 }}"), {
                        zoom: 10,
                        center: loc
                    });
                    new google.maps.Marker({ position: loc, map: map });
                }
            </script>
        {% else %}
            لم يتم تحديد الموقع
        {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
<script async defer
src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap0">
</script>
{% endblock %}
